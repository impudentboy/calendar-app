function GetMonthName(E){var e;switch(E){case 1:e="январь";break;case 2:e="февраль";break;case 3:e="март";break;case 4:e="апрель";break;case 5:e="май";break;case 6:e="июнь";break;case 7:e="июль";break;case 8:e="август";break;case 9:e="сентябрь";break;case 10:e="октябрь";break;case 11:e="ноябрь";break;case 12:e="декабрь"}return e}function RenderMonthYear(){var E=GetMonthName(CURRENT_MONTH);$("#"+MONTH).html(E),$("#"+YEAR).html(CURRENT_YEAR)}function RenderCalendar(){$("#"+CALENDAR_CONTAINER).empty,RenderMonthYear(),createCalendar(CALENDAR_CONTAINER,CURRENT_YEAR,CURRENT_MONTH)}function LoadEvents(){for(RenderCalendar(),i=0;i<events.length;i++)if(events[i].branch==CURRENT_BRANCH&&CURRENT_MONTH==events[i].date.month){var E=$("#"+events[i].date.day),e=events[i].time,n=events[i].title,t='<a class="event-in-cell" href="javascript:EventPopUp('+i+');">'+e+" "+n+"</a>";E.addClass(CELL_EVENT_INVITE),E.append(t)}}function ChangeBranch(){CURRENT_BRANCH=$("#"+BRANCH).val(),LoadEvents()}function Authentificate(){CURRENT_ROLE==ROLE_ORGANIZER?$("#"+ADD_EVENT).css("display","block"):$("#"+ADD_EVENT).css("display","none")}function ChangeUserRole(){CURRENT_ROLE=$("#"+USER_ROLE).val(),Authentificate()}function PrevMonth(){1!=CURRENT_MONTH?CURRENT_MONTH-=1:(CURRENT_MONTH=12,CURRENT_YEAR-=1),RenderCalendar(),LoadEvents()}function NextMonth(){12!=CURRENT_MONTH?CURRENT_MONTH+=1:(CURRENT_MONTH=1,CURRENT_YEAR+=1),RenderCalendar(),LoadEvents()}function SelectPopUp(){switch(CURRENT_ROLE){case"worker":SELECTED_POPUP=POPUP_WORKER;break;case"manager":SELECTED_POPUP=POPUP_MANAGER;break;case"organizer":SELECTED_POPUP=ORGANIZER_ADD_EVENT?POPUP_ADD_EVENT:POPUP_ORGANIZER}$("."+SELECTED_POPUP).css("display","block")}function ShowPopUp(){$("."+OVERLAY).css("display","block")}function RenderSubmitButton(E){switch(E){case!1:$("."+SELECTED_POPUP+SELECTED_POPUP_CONFIRM).css("display","block"),$("."+SELECTED_POPUP+SELECTED_POPUP_CANCEL).css("display","none");break;case!0:$("."+SELECTED_POPUP+SELECTED_POPUP_CONFIRM).css("display","none"),$("."+SELECTED_POPUP+SELECTED_POPUP_CANCEL).css("display","block")}}function GetEventInfo(){var E=events[SELECTED_EVENT].title,e=events[SELECTED_EVENT].description,n=events[SELECTED_EVENT].date.day,t=GetMonthName(events[SELECTED_EVENT].date.month),a=events[SELECTED_EVENT].time,_=events[SELECTED_EVENT].seats;switch(CURRENT_ROLE){case"worker":var T=events[SELECTED_EVENT].register.worker;break;case"manager":var T=events[SELECTED_EVENT].register.manager}$("."+SELECTED_POPUP+SELECTED_POPUP_TITLE).html(E),$("."+SELECTED_POPUP+SELECTED_POPUP_DESC).html(e),$("."+SELECTED_POPUP+SELECTED_POPUP_DAY).html(n),$("."+SELECTED_POPUP+SELECTED_POPUP_MONTH).html(t),$("."+SELECTED_POPUP+SELECTED_POPUP_TIME).html(a),$("."+SELECTED_POPUP+SELECTED_POPUP_SEATS).html(_),RenderSubmitButton(T)}function EventPopUp(E){SELECTED_EVENT=E,SelectPopUp(),ShowPopUp(),GetEventInfo()}function EventRegister(){switch(CURRENT_ROLE){case"worker":events[SELECTED_EVENT].register.worker=!0,RenderSubmitButton(events[SELECTED_EVENT].register.worker);break;case"manager":events[SELECTED_EVENT].register.manager=!0,RenderSubmitButton(events[SELECTED_EVENT].register.manager)}}function EventUnregister(){switch(CURRENT_ROLE){case"worker":events[SELECTED_EVENT].register.worker=!1,RenderSubmitButton(events[SELECTED_EVENT].register.worker);break;case"manager":events[SELECTED_EVENT].register.manager=!1,RenderSubmitButton(events[SELECTED_EVENT].register.manager)}}function ClosePopUp(){$("."+SELECTED_POPUP).css("display","none"),$("."+OVERLAY).css("display","none"),ClearFields(),ORGANIZER_ADD_EVENT=!1}function DeleteEvent(){events.splice(SELECTED_EVENT,1),RenderCalendar(),LoadEvents(),ClosePopUp()}function AddEventChangeMonth(){var E=$("#"+ADD_EVENT_MONTH).val();console.log(E);var e=GetMonthName(parseInt(E,10));console.log(e),$("#"+ADD_EVENT_MONTH+"-fake").html(e)}function GetDefaultValues(){$("#"+ADD_EVENT_DAY).val(TODAY),$("#"+ADD_EVENT_MONTH).val(CURRENT_MONTH),AddEventChangeMonth(),$("#"+ADD_EVENT_YEAR).val(CURRENT_YEAR),$("#"+ADD_EVENT_DATETIME).val(CURRENT_TIME),$("#"+ADD_EVENT_SEATS).val(25)}function ClearFields(){switch(CURRENT_ROLE){case ROLE_WORKER:break;case ROLE_MANAGER:$("#"+MANAGER_NAME).val(""),$("#"+MANAGER_JOB).val(""),$("#"+MANAGER_EMAIL).val("");break;case ROLE_ORGANIZER:$("#"+ADD_EVENT_TITLE).val(""),$("#"+ADD_EVENT_DESC).val(""),GetDefaultValues()}}function AddEvent(){var E=$("#"+ADD_EVENT_TITLE).val(),e=$("#"+ADD_EVENT_DESC).val(),n=$("#"+ADD_EVENT_DAY).val(),t=$("#"+ADD_EVENT_MONTH).val(),a=$("#"+ADD_EVENT_YEAR).val(),_=$("#"+ADD_EVENT_DATETIME).val(),T=$("#"+ADD_EVENT_SEATS).val(),r=$("#"+ADD_EVENT_BRANCH).val(),R={title:E,description:e,seats:T,branch:r,date:{day:n,month:t,year:a},time:_,register:{worker:!1,manager:!1}};events.push(R),RenderCalendar(),LoadEvents(),ClosePopUp()}var CURRENT_DATE=new Date,TODAY=CURRENT_DATE.getDate(),CURRENT_YEAR=CURRENT_DATE.getYear()+1900,CURRENT_MONTH=CURRENT_DATE.getMonth()+1,CURRENT_TIME=CURRENT_DATE.getHours()+":"+CURRENT_DATE.getMinutes(),ROLE_WORKER="worker",ROLE_MANAGER="manager",ROLE_ORGANIZER="organizer",CELL_EVENT_INVITE="date__invite",CELL_EVENT_CONFIRM="date__confirm",CALENDAR_CONTAINER="calendar",PREV_MONTH="prev-month",NEXT_MONTH="next-month",BRANCH="branch",USER_ROLE="user-role",ADD_EVENT="add-event",MONTH="calendar-month",YEAR="calendar-year",EVENT="event-in-cell",OVERLAY="b-overlay",POPUP_WORKER="b-popup-worker",POPUP_MANAGER="b-popup-manager",POPUP_ORGANIZER="b-popup-organizer",POPUP_ADD_EVENT="b-popup-add-event",ADD_EVENT_BRANCH="add-event-branch",ADD_EVENT_TITLE="add-event-title",ADD_EVENT_DESC="add-event-desc",ADD_EVENT_DAY="add-event-day",ADD_EVENT_MONTH="add-event-month",ADD_EVENT_YEAR="add-event-year",ADD_EVENT_DATETIME="add-event-datetime",ADD_EVENT_SEATS="add-event-seats",CURRENT_ROLE=ROLE_WORKER,CURRENT_BRANCH="",SELECTED_EVENT="",SELECTED_POPUP="",SELECTED_POPUP_TITLE="__event-desc .event-desc__title",SELECTED_POPUP_DESC="__event-desc .event-desc__description",SELECTED_POPUP_DAY="__event-info .event-info__day",SELECTED_POPUP_MONTH="__event-info .event-info__month",SELECTED_POPUP_TIME="__event-info .event-info__time-value",SELECTED_POPUP_SEATS="__event-info .event-info__count",SELECTED_POPUP_CONFIRM="__confirm",SELECTED_POPUP_CANCEL="__cancel",MANAGER_NAME="manager-name",MANAGER_JOB="manager-job",MANAGER_EMAIL="manager-email",ORGANIZER_ADD_EVENT=!1,events=[{title:"Технологии продаж для бизнеса 2017 года",description:"Как заключать миллиардные контракты через личные встречи, какая структура отдела продаж максимально эффективна в управлении.",seats:25,branch:"moscow",date:{day:9,month:8,year:2016},time:"18:00",register:{worker:!1,manager:!1}},{title:"Реклама в Инстаграм",description:"Как заключать миллиардные контракты через личные встречи, какая структура отдела продаж максимально эффективна в управлении.",seats:25,branch:"moscow",date:{day:12,month:8,year:2016},time:"18:00",register:{worker:!1,manager:!1}},{title:"Как развивать свой бизнес",description:"Как заключать миллиардные контракты через личные встречи, какая структура отдела продаж максимально эффективна в управлении.",seats:25,branch:"saint-p",date:{day:8,month:8,year:2016},time:"18:00",register:{worker:!1,manager:!1}},{title:"5 новых технологий маркетинга",description:"Как заключать миллиардные контракты через личные встречи, какая структура отдела продаж максимально эффективна в управлении.",seats:25,branch:"saint-p",date:{day:17,month:8,year:2016},time:"18:00",register:{worker:!1,manager:!1}}];$(document).ready(function(){RenderCalendar(),Authentificate(),$("#"+PREV_MONTH).click(function(){PrevMonth()}),$("#"+NEXT_MONTH).click(function(){NextMonth()}),$("#"+BRANCH).change(function(){ChangeBranch()}),$("#"+USER_ROLE).change(function(){ChangeUserRole()}),$("#"+ADD_EVENT).click(function(){ORGANIZER_ADD_EVENT=!0,SelectPopUp(),ShowPopUp(),GetDefaultValues()}),$("#"+ADD_EVENT_MONTH).change(function(){AddEventChangeMonth()})});